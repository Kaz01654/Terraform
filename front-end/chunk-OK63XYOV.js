import{a as _e}from"./chunk-XMRAJODF.js";import{d as ne,e as oe,f as se,g as le,i as pe,j as me,k as ce,m as de,p as ue}from"./chunk-A6SNVUCE.js";import{a as Q,b as X,c as Y,d as ee,g as te,h as ie,k as re,l as ae}from"./chunk-TWZKI4VX.js";import{a as he}from"./chunk-V45YFJOR.js";import{b as $,d as U,e as G,f as H,o as Z,r as q,y as J,z as K}from"./chunk-VE3AD5Y3.js";import{i as O,j as W,m as R,o as j,p as L}from"./chunk-QSIHMZNO.js";import{Cb as f,Db as m,Gb as x,Mb as A,Nb as b,Ob as y,Pb as N,Rb as T,Sb as S,Tb as E,Vb as z,Wb as w,Ya as s,Za as v,dc as V,e as fe,ec as k,f as g,ia as P,jb as C,mb as D,nb as p,qb as F,sa as d,ta as u,tb as r,ub as a,vb as I,zb as h}from"./chunk-II3ZEASU.js";var ge=fe(he());var be=()=>({"min-width":"50rem"}),Ce=()=>[5,10,20,50,100],Ie=()=>["descripcion"],xe=()=>({width:"50vw"}),we=()=>({"960px":"75vw"});function ye(i,l){if(i&1){let e=h();r(0,"div",20)(1,"span",21),I(2,"i",22),r(3,"input",23),f("input",function(t){d(e),m();let o=A(2);return u(o.filterGlobal(t.target.value,"contains"))}),a()(),r(4,"p-button",24),f("onClick",function(){d(e);let t=m();return u(t.open())}),a()()}if(i&2){let e=m();s(4),p("raised",!0)("loading",e.loading)("disabled",e.loading)}}function ve(i,l){if(i&1&&(r(0,"th",26),b(1),I(2,"p-sortIcon",27),a()),i&2){let e=l.$implicit;x("pSortableColumn",e.field),s(),N("",e.header," "),s(),x("field",e.field)}}function Te(i,l){if(i&1&&(r(0,"tr"),C(1,ve,3,3,"th",25),a()),i&2){let e=l.$implicit;s(),p("ngForOf",e)}}function Se(i,l){if(i&1){let e=h();r(0,"tr",28)(1,"td",29),b(2),a(),r(3,"td",29),b(4),V(5,"percent"),a(),r(6,"td",29),b(7),V(8,"date"),a(),r(9,"td",29)(10,"p-button",30),f("onClick",function(){let t=d(e).$implicit,o=m();return u(o.openUpdate(t))}),a(),r(11,"p-button",31),f("onClick",function(){let t=d(e).$implicit,o=m();return u(o.deleteImp(t.id))}),a()()()}if(i&2){let e=l.$implicit;s(2),y(e.descripcion),s(2),y(k(5,5,e.impuesto)),s(3),y(k(8,7,e.fecha)),s(3),p("rounded",!0),s(),p("rounded",!0)}}function Ee(i,l){if(i&1&&(r(0,"tr")(1,"td")(2,"h4"),b(3,"No hay impuestos"),a()()()),i&2){let e=l.$implicit;s(),D("colspan",e.length)}}function Me(i,l){if(i&1&&(r(0,"div",32)(1,"h4"),b(2),a()()),i&2){let e=m();s(2),y(e.titleModal)}}function Ve(i,l){if(i&1){let e=h();r(0,"p-button",37),f("onClick",function(){d(e);let t=m(2);return u(t.agregarImp())}),a()}if(i&2){let e=m(2);x("label",e.textBottom),p("raised",!0)}}function ke(i,l){if(i&1){let e=h();r(0,"p-button",38),f("onClick",function(){d(e);let t=m(2);return u(t.editarImp())}),a()}if(i&2){let e=m(2);x("label",e.textBottom),p("raised",!0)}}function Be(i,l){if(i&1){let e=h();C(0,Ve,1,2,"p-button",33)(1,ke,1,2,"p-button",34),r(2,"p-button",35),f("onClick",function(){d(e);let t=m();return u(t.clean())}),a(),r(3,"p-button",36),f("onClick",function(){d(e);let t=m();return u(t.closeDialog())}),a()}if(i&2){let e=m();p("ngIf",e.op=="Add"),s(),p("ngIf",e.op=="Edit"),s(),x("label",e.btnClean),p("raised",!0),s(),p("raised",!0)}}var c=ge.default.mixin({showClass:{popup:`
      animate__animated
      animate__fadeInUp
      animate__faster
    `},hideClass:{popup:`
      animate__animated
      animate__fadeOutDown
      animate__faster
    `}}),et=(()=>{let l=class l{constructor(n,t,o){this.apiImp=n,this.spinner=t,this.primengConfig=o,this.filas=0,this.columnas=[],this.info=[],this.loading=!1,this.titleModal="Agregar Producto",this.textBottom="Agregar",this.lbBtnModal="Cancelar",this.btnClean="Limpiar",this.op="Add",this.visible=!1,this.idImp=0,this.descImp="",this.filas=10,this.columnas=[{field:"descripcion",header:"Descripcion"},{field:"impuesto",header:"Impuesto"},{field:"fecha",header:"Fecha"},{field:"",header:"Acciones"}]}ngOnInit(){return g(this,null,function*(){this.primengConfig.ripple=!0,this.load(!0),yield this.poblarTabla(),this.load(!1)})}poblarTabla(){return g(this,null,function*(){this.load(!0),this.apiImp.getImpuesto().subscribe(n=>g(this,null,function*(){this.info=n}),n=>{c.fire("Error!",`${n.message}`,"error")},()=>this.load(!1))})}open(){this.clean(),this.titleModal="Agregar Impuesto",this.textBottom="Agregar",this.op="Add",this.showDialog()}openUpdate(n){this.titleModal="Editar Impuesto",this.textBottom="Editar",this.op="Edit",this.idImp=n.id,this.descImp=n.descripcion,this.impImp=n.impuesto*100,this.showDialog()}agregarImp(){return g(this,null,function*(){if(this.descImp==""||this.impImp==null)c.fire({position:"bottom-end",icon:"warning",title:"Debe llenar todos los campos!",showConfirmButton:!1,timer:2e3,toast:!0});else{let n={descripcion:this.descImp,impuesto:this.impImp/100};this.load(!0),this.apiImp.insertImp(n).subscribe(t=>{t.status?c.fire({position:"top-end",icon:"success",title:t.mgs,showConfirmButton:!1,timer:2e3}).then(()=>g(this,null,function*(){yield this.poblarTabla(),this.clean()})):c.fire("Cuidado!",t.mgs,"warning")},t=>{c.fire("Error!",`${t.message}`,"error")},()=>(this.load(!1),this.closeDialog()))}})}editarImp(){return g(this,null,function*(){if(this.descImp==""||this.impImp==null)c.fire({position:"bottom-end",icon:"warning",title:"Debe llenar todos los campos!",showConfirmButton:!1,timer:2e3,toast:!0});else{let n={descripcion:this.descImp,impuesto:this.impImp/100};this.load(!0),this.apiImp.updateImp(this.idImp,n).subscribe(t=>{t.status?c.fire({position:"top-end",icon:"success",title:t.mgs,showConfirmButton:!1,timer:2e3}).then(()=>g(this,null,function*(){yield this.poblarTabla(),this.clean()})):c.fire("Cuidado!",t.mgs,"warning")},t=>{c.fire("Error!",`${t.message}`,"error")},()=>(this.load(!1),this.closeDialog()))}})}deleteImp(n){return g(this,null,function*(){c.fire({title:"Esta seguro de realizar esta accion?",text:"Se va a eliminar el Impuesto!",icon:"warning",showCancelButton:!0,confirmButtonText:"Eliminar",confirmButtonColor:"#d33",cancelButtonText:"Cancelar",cancelButtonColor:"#B9B6B5"}).then(t=>g(this,null,function*(){t.value&&(this.load(!0),this.apiImp.deleteImp(n).subscribe(o=>{o.status?c.fire({position:"top-end",icon:"success",title:o.mgs,showConfirmButton:!1,timer:2e3}).then(()=>g(this,null,function*(){yield this.poblarTabla()})):(c.fire("Cuidado!",o.mgs,"warning"),this.poblarTabla())},o=>{c.fire("Error!",`${o.message}`,"error")},()=>(this.load(!1),this.closeDialog())))}))})}clean(){this.descImp="",this.impImp=void 0}showDialog(){this.visible=!0}closeDialog(){this.visible=!1}load(n){n?(this.loading=!0,this.spinner.show()):(this.loading=!1,this.spinner.hide())}};l.\u0275fac=function(t){return new(t||l)(v(_e),v(Q),v(Z))},l.\u0275cmp=P({type:l,selectors:[["app-impuestos"]],standalone:!0,features:[z],decls:22,vars:26,consts:[["dt",""],[1,"card",2,"text-align","center"],["styleClass","p-datatable-gridlines p-datatable-striped","columnResizeMode","expand","currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords} impuestos","scrollHeight","300px",3,"tableStyle","value","rows","loading","columns","paginator","showCurrentPageReport","resizableColumns","rowsPerPageOptions","globalFilterFields"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["bdColor","rgba(0, 0, 0, 0.8)","size","large","color","#fff","type","ball-atom",3,"fullScreen"],["header","Header",3,"visibleChange","visible","modal","baseZIndex","breakpoints","draggable","resizable"],["ng-template","","pTemplate","header"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-6"],[1,"p-inputgroup"],["tooltipPosition","bottom","pTooltip","Descripcion",1,"p-inputgroup-addon"],[1,"pi","pi-info-circle"],["type","text","pInputText","","placeholder","Descripcion",3,"ngModelChange","ngModel"],["tooltipPosition","bottom","pTooltip","Impuesto",1,"p-inputgroup-addon"],[1,"pi","pi-money-bill"],["prefix","%","min","0","max","100",3,"ngModelChange","ngModel"],["pTemplate","footer"],[1,"mr-3",2,"display","flex"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["type","text","pInputText","","size","20","placeholder","B\xFAsqueda...",2,"width","auto!important",3,"input"],["pTooltip","Agregar Impuesto","tooltipPosition","bottom","label","Agregar","icon","pi pi-external-link",1,"p-button-info","margen",3,"onClick","raised","loading","disabled"],["pResizableColumn","","style","width: 11em","class","text-center",3,"pSortableColumn",4,"ngFor","ngForOf"],["pResizableColumn","",1,"text-center",2,"width","11em",3,"pSortableColumn"],[3,"field"],[1,"animate__animated","animate__fadeInLeft"],[1,"text-center"],["pTooltip","Editar Impuesto","tooltipPosition","bottom","icon","pi pi-pencil","severity","success",1,"margen2",3,"onClick","rounded"],["pTooltip","Eliminar Impuesto","tooltipPosition","bottom","icon","pi pi-trash","severity","danger",1,"margen2",3,"onClick","rounded"],[1,"inline-flex","align-items-center","justify-content-center","gap-2"],["icon","pi pi-check","severity","primary",3,"raised","label","onClick",4,"ngIf"],["icon","pi pi-search","severity","success",3,"raised","label","onClick",4,"ngIf"],["icon","pi pi-eraser","severity","secondary",3,"onClick","raised","label"],["icon","pi pi-times","label","Cancelar","severity","danger",3,"onClick","raised"],["icon","pi pi-check","severity","primary",3,"onClick","raised","label"],["icon","pi pi-search","severity","success",3,"onClick","raised","label"]],template:function(t,o){if(t&1){let M=h();r(0,"div",1)(1,"p-table",2,0),C(3,ye,5,3,"ng-template",3)(4,Te,2,1,"ng-template",4)(5,Se,12,9,"ng-template",5)(6,Ee,4,1,"ng-template",6),a()(),I(7,"ngx-spinner",7),r(8,"p-dialog",8),E("visibleChange",function(_){return d(M),S(o.visible,_)||(o.visible=_),u(_)}),C(9,Me,3,1,"ng-template",9),r(10,"div",10)(11,"div",11)(12,"div",12)(13,"span",13),I(14,"i",14),a(),r(15,"input",15),E("ngModelChange",function(_){return d(M),S(o.descImp,_)||(o.descImp=_),u(_)}),a()()(),r(16,"div",11)(17,"div",12)(18,"span",16),I(19,"i",17),a(),r(20,"p-inputNumber",18),E("ngModelChange",function(_){return d(M),S(o.impImp,_)||(o.impImp=_),u(_)}),a()()()(),C(21,Be,4,5,"ng-template",19),a()}t&2&&(s(),p("tableStyle",w(21,be))("value",o.info)("rows",o.filas)("loading",o.loading)("columns",o.columnas)("paginator",!0)("showCurrentPageReport",!0)("resizableColumns",!0)("rowsPerPageOptions",w(22,Ce))("globalFilterFields",w(23,Ie)),s(6),p("fullScreen",!0),s(),F(w(24,xe)),T("visible",o.visible),p("modal",!0)("baseZIndex",1e4)("breakpoints",w(25,we))("draggable",!1)("resizable",!1),s(7),T("ngModel",o.descImp),s(5),T("ngModel",o.impImp))},dependencies:[L,O,W,j,R,ue,pe,q,me,de,ce,oe,ne,ie,te,H,$,U,G,Y,X,ee,ae,re,K,J,le,se],styles:[".swal2-container{z-index:20000!important}.margen[_ngcontent-%COMP%]{margin-left:5px}.margen2[_ngcontent-%COMP%]{margin-right:.5rem}"]});let i=l;return i})();export{et as ImpuestosComponent};
