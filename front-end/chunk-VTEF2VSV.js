import{a as Ke}from"./chunk-O5VURVW4.js";import{a as Xe,b as Ze}from"./chunk-CFHKRXTB.js";import{a as Qe,b as z}from"./chunk-P4PAYY2C.js";import{d as Re,e as Ae,i as je,j as qe,k as ze,m as We,p as Ue}from"./chunk-A6SNVUCE.js";import{a as Se,b as Be,c as Pe,d as Ne,g as Fe,h as De,k as Le,l as Oe}from"./chunk-TWZKI4VX.js";import{a as et}from"./chunk-V45YFJOR.js";import{Q,a as ye,b as ke,d as xe,e as Te,f as Ie,o as A,r as L,s as Ve,u as O,w as Me,x as Ee,y as j,z as q}from"./chunk-VE3AD5Y3.js";import{b as Ce,h as ge,i as _e,j as D,k as be,l as we,m as ve,p as R,q as Z}from"./chunk-QSIHMZNO.js";import{$ as Y,Ac as X,Ca as $,Cb as C,Db as f,Ga as ee,Gb as P,Ib as se,Jb as le,Kb as U,Lb as K,Mb as pe,Nb as x,Ob as I,Pb as ue,Rb as M,Sb as E,Tb as S,Ub as ce,Vb as de,Wb as N,Ya as u,Z as G,Za as k,dc as he,e as $e,f as w,fc as me,gb as te,ia as F,ja as J,jb as b,mb as B,nb as m,pb as ie,qb as ne,rb as oe,sa as d,ta as h,tb as l,tc as fe,ub as p,vb as T,wb as re,xb as ae,za as V,zb as _,zc as v}from"./chunk-II3ZEASU.js";var rt=["input"];function at(o,c){if(o&1){let t=_();l(0,"TimesIcon",5),C("click",function(){d(t);let e=f(2);return h(e.clear())}),p()}o&2&&(m("styleClass","p-inputmask-clear-icon"),B("data-pc-section","clearIcon"))}function st(o,c){}function lt(o,c){o&1&&b(0,st,0,0,"ng-template")}function pt(o,c){if(o&1){let t=_();l(0,"span",6),C("click",function(){d(t);let e=f(2);return h(e.clear())}),b(1,lt,1,0,null,7),p()}if(o&2){let t=f(2);B("data-pc-section","clearIcon"),u(),m("ngTemplateOutlet",t.clearIconTemplate)}}function ut(o,c){if(o&1&&(re(0),b(1,at,1,2,"TimesIcon",3)(2,pt,2,2,"span",4),ae()),o&2){let t=f();u(),m("ngIf",!t.clearIconTemplate),u(),m("ngIf",t.clearIconTemplate)}}var ct={provide:ye,useExisting:G(()=>dt),multi:!0},dt=(()=>{class o{document;platformId;el;cd;config;type="text";slotChar="_";autoClear=!0;showClear=!1;style;inputId;styleClass;placeholder;size;maxlength;tabindex;title;variant="outlined";ariaLabel;ariaLabelledBy;ariaRequired;disabled;readonly;unmask;name;required;characterPattern="[A-Za-z]";autofocus;set autoFocus(t){this.autofocus=t,console.warn("autoFocus is deprecated. Use autofocus property instead.")}autocomplete;keepBuffer=!1;get mask(){return this._mask}set mask(t){this._mask=t,this.initMask(),this.writeValue(""),this.onModelChange(this.value)}onComplete=new V;onFocus=new V;onBlur=new V;onInput=new V;onKeydown=new V;onClear=new V;inputViewChild;templates;clearIconTemplate;value;_mask;onModelChange=()=>{};onModelTouched=()=>{};input;filled;defs;tests;partialPosition;firstNonMaskPos;lastRequiredNonMaskPos;len;oldVal;buffer;defaultBuffer;focusText;caretTimeoutId;androidChrome=!0;focused;_variant="outlined";get inputClass(){return{"p-inputmask":!0}}constructor(t,i,e,n,r){this.document=t,this.platformId=i,this.el=e,this.cd=n,this.config=r}ngOnInit(){if(Z(this.platformId)){let t=navigator.userAgent;this.androidChrome=/chrome/i.test(t)&&/android/i.test(t)}this.initMask()}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"clearicon":this.clearIconTemplate=t.template;break}})}initMask(){this.tests=[],this.partialPosition=this.mask.length,this.len=this.mask.length,this.firstNonMaskPos=null,this.defs={9:"[0-9]",a:this.characterPattern,"*":`${this.characterPattern}|[0-9]`};let t=this.mask.split("");for(let i=0;i<t.length;i++){let e=t[i];e=="?"?(this.len--,this.partialPosition=i):this.defs[e]?(this.tests.push(new RegExp(this.defs[e])),this.firstNonMaskPos===null&&(this.firstNonMaskPos=this.tests.length-1),i<this.partialPosition&&(this.lastRequiredNonMaskPos=this.tests.length-1)):this.tests.push(null)}this.buffer=[];for(let i=0;i<t.length;i++){let e=t[i];e!="?"&&(this.defs[e]?this.buffer.push(this.getPlaceholder(i)):this.buffer.push(e))}this.defaultBuffer=this.buffer.join("")}writeValue(t){this.value=t,this.inputViewChild&&this.inputViewChild.nativeElement&&(this.value==null||this.value==null?this.inputViewChild.nativeElement.value="":this.inputViewChild.nativeElement.value=this.value,this.checkVal(),this.focusText=this.inputViewChild.nativeElement.value,this.updateFilledState())}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}caret(t,i){let e,n,r;if(!(!this.inputViewChild?.nativeElement.offsetParent||this.inputViewChild.nativeElement!==this.inputViewChild.nativeElement.ownerDocument.activeElement))if(typeof t=="number")n=t,r=typeof i=="number"?i:n,this.inputViewChild.nativeElement.setSelectionRange?this.inputViewChild.nativeElement.setSelectionRange(n,r):this.inputViewChild.nativeElement.createTextRange&&(e=this.inputViewChild.nativeElement.createTextRange(),e.collapse(!0),e.moveEnd("character",r),e.moveStart("character",n),e.select());else return this.inputViewChild.nativeElement.setSelectionRange?(n=this.inputViewChild.nativeElement.selectionStart,r=this.inputViewChild.nativeElement.selectionEnd):this.document&&this.document.selection.createRange&&(e=this.document.createRange(),n=0-e.duplicate().moveStart("character",-1e5),r=n+e.text.length),{begin:n,end:r}}isCompleted(){let t;for(let i=this.firstNonMaskPos;i<=this.lastRequiredNonMaskPos;i++)if(this.tests[i]&&this.buffer[i]===this.getPlaceholder(i))return!1;return!0}getPlaceholder(t){return t<this.slotChar.length?this.slotChar.charAt(t):this.slotChar.charAt(0)}seekNext(t){for(;++t<this.len&&!this.tests[t];);return t}seekPrev(t){for(;--t>=0&&!this.tests[t];);return t}shiftL(t,i){let e,n;if(!(t<0)){for(e=t,n=this.seekNext(i);e<this.len;e++)if(this.tests[e]){if(n<this.len&&this.tests[e].test(this.buffer[n]))this.buffer[e]=this.buffer[n],this.buffer[n]=this.getPlaceholder(n);else break;n=this.seekNext(n)}this.writeBuffer(),this.caret(Math.max(this.firstNonMaskPos,t))}}shiftR(t){let i,e,n,r;for(i=t,e=this.getPlaceholder(t);i<this.len;i++)if(this.tests[i])if(n=this.seekNext(i),r=this.buffer[i],this.buffer[i]=e,n<this.len&&this.tests[n].test(r))e=r;else break}handleAndroidInput(t){var i=this.inputViewChild?.nativeElement.value,e=this.caret();if(this.oldVal&&this.oldVal.length&&this.oldVal.length>i.length){for(this.checkVal(!0);e.begin>0&&!this.tests[e.begin-1];)e.begin--;if(e.begin===0)for(;e.begin<this.firstNonMaskPos&&!this.tests[e.begin];)e.begin++;setTimeout(()=>{this.caret(e.begin,e.begin),this.updateModel(t),this.isCompleted()&&this.onComplete.emit()},0)}else{for(this.checkVal(!0);e.begin<this.len&&!this.tests[e.begin];)e.begin++;setTimeout(()=>{this.caret(e.begin,e.begin),this.updateModel(t),this.isCompleted()&&this.onComplete.emit()},0)}}onInputBlur(t){if(this.focused=!1,this.onModelTouched(),this.keepBuffer||this.checkVal(),this.updateFilledState(),this.onBlur.emit(t),this.inputViewChild?.nativeElement.value!=this.focusText||this.inputViewChild?.nativeElement.value!=this.value){this.updateModel(t);let i=this.document.createEvent("HTMLEvents");i.initEvent("change",!0,!1),this.inputViewChild?.nativeElement.dispatchEvent(i)}}onInputKeydown(t){if(this.readonly)return;let i=t.which||t.keyCode,e,n,r,a;Z(this.platformId)&&(a=/iphone/i.test(O.getUserAgent())),this.oldVal=this.inputViewChild?.nativeElement.value,this.onKeydown.emit(t),i===8||i===46||a&&i===127?(e=this.caret(),n=e.begin,r=e.end,r-n===0&&(n=i!==46?this.seekPrev(n):r=this.seekNext(n-1),r=i===46?this.seekNext(r):r),this.clearBuffer(n,r),this.keepBuffer?this.shiftL(n,r-2):this.shiftL(n,r-1),this.updateModel(t),this.onInput.emit(t),t.preventDefault()):i===13?(this.onInputBlur(t),this.updateModel(t)):i===27&&(this.inputViewChild.nativeElement.value=this.focusText,this.caret(0,this.checkVal()),this.updateModel(t),t.preventDefault())}onKeyPress(t){if(!this.readonly){var i=t.which||t.keyCode,e=this.caret(),n,r,a,s;t.ctrlKey||t.altKey||t.metaKey||i<32||i>34&&i<41||(i&&i!==13&&(e.end-e.begin!==0&&(this.clearBuffer(e.begin,e.end),this.shiftL(e.begin,e.end-1)),n=this.seekNext(e.begin-1),n<this.len&&(r=String.fromCharCode(i),this.tests[n].test(r)&&(this.shiftR(n),this.buffer[n]=r,this.writeBuffer(),a=this.seekNext(n),O.isClient()&&/android/i.test(O.getUserAgent())?setTimeout(()=>{this.caret(a)},0):this.caret(a),e.begin<=this.lastRequiredNonMaskPos&&(s=this.isCompleted()),this.onInput.emit(t))),t.preventDefault()),this.updateModel(t),this.updateFilledState(),s&&this.onComplete.emit())}}clearBuffer(t,i){if(!this.keepBuffer){let e;for(e=t;e<i&&e<this.len;e++)this.tests[e]&&(this.buffer[e]=this.getPlaceholder(e))}}writeBuffer(){this.inputViewChild.nativeElement.value=this.buffer.join("")}checkVal(t){let i=this.inputViewChild?.nativeElement.value,e=-1,n,r,a;for(n=0,a=0;n<this.len;n++)if(this.tests[n]){for(this.buffer[n]=this.getPlaceholder(n);a++<i.length;)if(r=i.charAt(a-1),this.tests[n].test(r)){this.keepBuffer||(this.buffer[n]=r),e=n;break}if(a>i.length){this.clearBuffer(n+1,this.len);break}}else this.buffer[n]===i.charAt(a)&&a++,n<this.partialPosition&&(e=n);return t?this.writeBuffer():e+1<this.partialPosition?this.autoClear||this.buffer.join("")===this.defaultBuffer?(this.inputViewChild?.nativeElement.value&&(this.inputViewChild.nativeElement.value=""),this.clearBuffer(0,this.len)):this.writeBuffer():(this.writeBuffer(),this.inputViewChild.nativeElement.value=this.inputViewChild?.nativeElement.value.substring(0,e+1)),this.partialPosition?n:this.firstNonMaskPos}onInputFocus(t){if(this.readonly)return;this.focused=!0,clearTimeout(this.caretTimeoutId);let i;this.focusText=this.inputViewChild?.nativeElement.value,i=this.keepBuffer?this.inputViewChild?.nativeElement.value.length:this.checkVal(),this.caretTimeoutId=setTimeout(()=>{this.inputViewChild?.nativeElement===this.inputViewChild?.nativeElement.ownerDocument.activeElement&&(this.writeBuffer(),i==this.mask?.replace("?","").length?this.caret(0,i):this.caret(i))},10),this.onFocus.emit(t)}onInputChange(t){this.androidChrome?this.handleAndroidInput(t):this.handleInputChange(t),this.onInput.emit(t)}handleInputChange(t){this.readonly||this.disabled||setTimeout(()=>{var i=this.checkVal(!0);this.caret(i),this.updateModel(t),this.isCompleted()&&this.onComplete.emit()},0)}getUnmaskedValue(){let t=[];for(let i=0;i<this.buffer.length;i++){let e=this.buffer[i];this.tests[i]&&e!=this.getPlaceholder(i)&&t.push(e)}return t.join("")}updateModel(t){let i=this.unmask?this.getUnmaskedValue():t.target.value;(i!==null||i!==void 0)&&(this.value=i,this.onModelChange(this.value))}updateFilledState(){this.filled=this.inputViewChild?.nativeElement&&this.inputViewChild.nativeElement.value!=""}focus(){this.inputViewChild?.nativeElement.focus()}clear(){this.inputViewChild.nativeElement.value="",this.value=null,this.onModelChange(this.value),this.onClear.emit()}static \u0275fac=function(i){return new(i||o)(k(Ce),k(ee),k($),k(fe),k(A))};static \u0275cmp=F({type:o,selectors:[["p-inputMask"]],contentQueries:function(i,e,n){if(i&1&&se(n,L,4),i&2){let r;U(r=K())&&(e.templates=r)}},viewQuery:function(i,e){if(i&1&&le(rt,7),i&2){let n;U(n=K())&&(e.inputViewChild=n.first)}},hostAttrs:[1,"p-element"],hostVars:6,hostBindings:function(i,e){i&2&&ie("p-inputwrapper-filled",e.filled)("p-inputwrapper-focus",e.focused)("p-inputmask-clearable",e.showClear&&!e.disabled)},inputs:{type:"type",slotChar:"slotChar",autoClear:[2,"autoClear","autoClear",v],showClear:[2,"showClear","showClear",v],style:"style",inputId:"inputId",styleClass:"styleClass",placeholder:"placeholder",size:[2,"size","size",X],maxlength:[2,"maxlength","maxlength",X],tabindex:"tabindex",title:"title",variant:"variant",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",ariaRequired:[2,"ariaRequired","ariaRequired",v],disabled:[2,"disabled","disabled",v],readonly:[2,"readonly","readonly",v],unmask:[2,"unmask","unmask",v],name:"name",required:[2,"required","required",v],characterPattern:"characterPattern",autofocus:[2,"autofocus","autofocus",v],autoFocus:[2,"autoFocus","autoFocus",v],autocomplete:"autocomplete",keepBuffer:[2,"keepBuffer","keepBuffer",v],mask:"mask"},outputs:{onComplete:"onComplete",onFocus:"onFocus",onBlur:"onBlur",onInput:"onInput",onKeydown:"onKeydown",onClear:"onClear"},features:[ce([ct]),te],decls:3,vars:24,consts:[["input",""],["pInputText","","pAutoFocus","",3,"focus","blur","keydown","keypress","input","paste","ngClass","ngStyle","disabled","readonly","variant","autofocus"],[4,"ngIf"],[3,"styleClass","click",4,"ngIf"],["class","p-inputmask-clear-icon",3,"click",4,"ngIf"],[3,"click","styleClass"],[1,"p-inputmask-clear-icon",3,"click"],[4,"ngTemplateOutlet"]],template:function(i,e){if(i&1){let n=_();l(0,"input",1,0),C("focus",function(a){return d(n),h(e.onInputFocus(a))})("blur",function(a){return d(n),h(e.onInputBlur(a))})("keydown",function(a){return d(n),h(e.onInputKeydown(a))})("keypress",function(a){return d(n),h(e.onKeyPress(a))})("input",function(a){return d(n),h(e.onInputChange(a))})("paste",function(a){return d(n),h(e.handleInputChange(a))}),p(),b(2,ut,3,2,"ng-container",2)}i&2&&(oe(e.styleClass),m("ngClass",e.inputClass)("ngStyle",e.style)("disabled",e.disabled)("readonly",e.readonly)("variant",e.variant)("autofocus",e.autofocus),B("id",e.inputId)("type",e.type)("name",e.name)("placeholder",e.placeholder)("title",e.title)("size",e.size)("autocomplete",e.autocomplete)("maxlength",e.maxlength)("tabindex",e.tabindex)("aria-label",e.ariaLabel)("aria-labelledBy",e.ariaLabelledBy)("aria-required",e.ariaRequired)("required",e.required)("data-pc-name","inputmask")("data-pc-section","root"),u(2),m("ngIf",e.value!=null&&e.filled&&e.showClear&&!e.disabled))},dependencies:()=>[ge,D,we,be,j,Me,Q],styles:[`@layer primeng{.p-inputmask-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-inputmask-clearable{position:relative}}
`],encapsulation:2,changeDetection:0})}return o})(),He=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=J({type:o});static \u0275inj=Y({imports:[R,q,Ee,Q,Ve]})}return o})();var Ge=$e(et());var ht=()=>({"min-width":"50rem"}),mt=()=>[5,10,20,50,100],ft=()=>["nombre","rtn","fecha"],Ct=()=>({width:"50vw"}),gt=()=>({"960px":"75vw"});function _t(o,c){if(o&1){let t=_();l(0,"p-button",37),C("onClick",function(){d(t);let e=f(2);return h(e.descargarCSV(e.info,"Informe"))}),p()}if(o&2){let t=f(2);m("disabled",t.loading)}}function bt(o,c){if(o&1){let t=_();l(0,"p-button",38),C("onClick",function(){d(t);let e=f(2);return h(e.descargarExcel())}),p()}if(o&2){let t=f(2);m("disabled",t.loading)}}function wt(o,c){if(o&1){let t=_();l(0,"div",30)(1,"span",31),T(2,"i",32),l(3,"input",33),C("input",function(e){d(t),f();let n=pe(2);return h(n.filterGlobal(e.target.value,"contains"))}),p()(),l(4,"p-button",34),C("onClick",function(){d(t);let e=f();return h(e.open())}),p(),b(5,_t,1,1,"p-button",35)(6,bt,1,1,"p-button",36),p()}if(o&2){let t=f();u(4),m("raised",!0)("loading",t.loading)("disabled",t.loading),u(),m("ngIf",t.info),u(),m("ngIf",t.info)}}function vt(o,c){if(o&1&&(l(0,"th",40),x(1),T(2,"p-sortIcon",41),p()),o&2){let t=c.$implicit;P("pSortableColumn",t.field),u(),ue("",t.header," "),u(),P("field",t.field)}}function yt(o,c){if(o&1&&(l(0,"tr"),b(1,vt,3,3,"th",39),p()),o&2){let t=c.$implicit;u(),m("ngForOf",t)}}function kt(o,c){if(o&1){let t=_();l(0,"tr",42)(1,"td",43),x(2),p(),l(3,"td",43),x(4),p(),l(5,"td",43),x(6),p(),l(7,"td",43),x(8),p(),l(9,"td",43),x(10),p(),l(11,"td",43),x(12),he(13,"date"),p(),l(14,"td",43)(15,"p-button",44),C("onClick",function(){let e=d(t).$implicit,n=f();return h(n.openUpdate(e))}),p(),l(16,"p-button",45),C("onClick",function(){let e=d(t).$implicit,n=f();return h(n.deleteClient(e.id))}),p()()()}if(o&2){let t=c.$implicit;u(2),I(t.nombre),u(2),I(t.direccion),u(2),I(t.correo),u(2),I(t.contacto),u(2),I(t.rtn),u(2),I(me(13,8,t.fecha,"yyyy-MM-dd")),u(3),m("rounded",!0),u(),m("rounded",!0)}}function xt(o,c){if(o&1&&(l(0,"tr")(1,"td")(2,"h4"),x(3,"No hay clientes"),p()()()),o&2){let t=c.$implicit;u(),B("colspan",t.length)}}function Tt(o,c){if(o&1&&(l(0,"div",46)(1,"h4"),x(2),p()()),o&2){let t=f();u(2),I(t.titleModal)}}function It(o,c){if(o&1){let t=_();l(0,"p-button",51),C("onClick",function(){d(t);let e=f(2);return h(e.agregarClient())}),p()}if(o&2){let t=f(2);P("label",t.textBottom),m("raised",!0)}}function Vt(o,c){if(o&1){let t=_();l(0,"p-button",52),C("onClick",function(){d(t);let e=f(2);return h(e.editarClient())}),p()}if(o&2){let t=f(2);P("label",t.textBottom),m("raised",!0)}}function Mt(o,c){if(o&1){let t=_();b(0,It,1,2,"p-button",47)(1,Vt,1,2,"p-button",48),l(2,"p-button",49),C("onClick",function(){d(t);let e=f();return h(e.clean())}),p(),l(3,"p-button",50),C("onClick",function(){d(t);let e=f();return h(e.closeDialog())}),p()}if(o&2){let t=f();m("ngIf",t.op=="Add"),u(),m("ngIf",t.op=="Edit"),u(),P("label",t.btnClean),m("raised",!0),u(),m("raised",!0)}}var g=Ge.default.mixin({showClass:{popup:`
      animate__animated
      animate__fadeInUp
      animate__faster
    `},hideClass:{popup:`
      animate__animated
      animate__fadeOutDown
      animate__faster
    `}}),mi=(()=>{let c=class c{constructor(i,e,n){this.api=i,this.spinner=e,this.primengConfig=n,this.fileName="Informe.xlsx",this.filas=0,this.columnas=[],this.info=[],this.loading=!1,this.titleModal="Agregar Cliente",this.textBottom="Agregar",this.lbBtnModal="Cancelar",this.btnClean="Limpiar",this.op="Add",this.href="",this.visible=!1,this.idClient=0,this.nombreClient="",this.direccionClient="",this.correoClient="",this.contactoClient="",this.rtnClient="",this.filas=10,this.columnas=[{field:"nombre",header:"Nombre"},{field:"direccion",header:"Direccion"},{field:"correo",header:"Correo"},{field:"contacto",header:"Contacto"},{field:"rtn",header:"RTN"},{field:"fecha",header:"Fecha"},{field:"",header:"Acciones"}]}ngOnInit(){return w(this,null,function*(){this.primengConfig.ripple=!0,this.load(!0),yield this.poblarTabla(),this.load(!1)})}poblarTabla(){return w(this,null,function*(){this.load(!0),this.api.getClients().subscribe(i=>w(this,null,function*(){this.info=i}),i=>{g.fire("Error!",`${i.message}`,"error")},()=>this.load(!1))})}open(){this.clean(),this.titleModal="Agregar Cliente",this.textBottom="Agregar",this.op="Add",this.showDialog()}openUpdate(i){this.titleModal="Editar Cliente",this.textBottom="Editar",this.op="Edit",this.idClient=i.id,this.nombreClient=i.nombre,this.direccionClient=i.direccion,this.correoClient=i.correo,this.contactoClient=i.contacto,this.rtnClient=i.rtn,this.showDialog()}agregarClient(){return w(this,null,function*(){if(this.nombreClient=="")g.fire({position:"bottom-end",icon:"warning",title:"Debe llenar los campos obligatorios(Nombre)!",showConfirmButton:!1,timer:2e3,toast:!0});else if(this.info.findIndex(i=>i.nombre===this.nombreClient)!=-1)g.fire({position:"bottom-end",icon:"warning",title:"Ya tiene registrado este cliente!",showConfirmButton:!1,timer:2e3,toast:!0});else{let i={nombre:this.nombreClient,direccion:this.direccionClient,correo:this.correoClient,contacto:this.contactoClient,rtn:this.rtnClient};this.load(!0),this.api.insertClient(i).subscribe(e=>{e.status?g.fire({position:"top-end",icon:"success",title:e.mgs,showConfirmButton:!1,timer:2e3}).then(()=>w(this,null,function*(){yield this.poblarTabla(),this.clean()})):g.fire("Cuidado!",e.mgs,"warning")},e=>{g.fire("Error!",`${e.message}`,"error")},()=>(this.load(!1),this.closeDialog()))}})}editarClient(){return w(this,null,function*(){if(this.idClient==0||this.nombreClient=="")g.fire({position:"bottom-end",icon:"warning",title:"Debe llenar los campos obligatorios(Nombre)!",showConfirmButton:!1,timer:2e3,toast:!0});else{let i=this.info.findIndex(e=>e.nombre===this.nombreClient);if(i!=-1&&this.info[i].id!=this.idClient)g.fire({position:"bottom-end",icon:"warning",title:"Ya tiene registrado este cliente!",showConfirmButton:!1,timer:2e3,toast:!0});else{let e={nombre:this.nombreClient,direccion:this.direccionClient,correo:this.correoClient,contacto:this.contactoClient,rtn:this.rtnClient};this.load(!0),this.api.updateClient(this.idClient,e).subscribe(n=>{n.status?g.fire({position:"top-end",icon:"success",title:n.mgs,showConfirmButton:!1,timer:2e3}).then(()=>w(this,null,function*(){yield this.poblarTabla(),this.clean()})):g.fire("Cuidado!",n.mgs,"warning")},n=>{g.fire("Error!",`${n.message}`,"error")},()=>(this.load(!1),this.closeDialog()))}}})}deleteClient(i){return w(this,null,function*(){g.fire({title:"Esta seguro de realizar esta accion?",text:"Se va a eliminar el Cliente!",icon:"warning",showCancelButton:!0,confirmButtonText:"Eliminar",confirmButtonColor:"#d33",cancelButtonText:"Cancelar",cancelButtonColor:"#B9B6B5"}).then(e=>w(this,null,function*(){e.value&&(this.load(!0),this.api.deleteClient(i).subscribe(n=>{n.status?g.fire({position:"top-end",icon:"success",title:n.mgs,showConfirmButton:!1,timer:2e3}).then(()=>w(this,null,function*(){yield this.poblarTabla()})):(g.fire("Cuidado!",n.mgs,"warning"),this.poblarTabla())},n=>{g.fire("Error!",`${n.message}`,"error")},()=>(this.load(!1),this.closeDialog())))}))})}clean(){this.nombreClient="",this.direccionClient="",this.contactoClient="",this.correoClient="",this.rtnClient=""}ConvertToCSV(i,e,n){let r=typeof i!="object"?JSON.parse(i):i,a="",s="";for(let y in e)s+=e[y]+", ";s=s.replace(/,\s*$/,""),a+=s+`\r
`;for(let y=0;y<r.length;y++){let W="",H=0;for(let Ye in n){let Je=n[Ye];W+=(H!=0?", ":"")+r[y][Je],H++}a+=W+`\r
`}return a}descargarCSV(i,e="data"){let n=this.ConvertToCSV(i,["Nombre","Direccion","Correo","Contacto","RTN","Fecha"],["nombre","direccion","Correo","Contacto","rtn","fecha"]),r=new Blob(["\uFEFF"+n],{type:"text/csvcharset=utf-8"}),a=document.createElement("a"),s=URL.createObjectURL(r);navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1&&a.setAttribute("target","_blank"),a.setAttribute("href",s),a.setAttribute("download",e+".csv"),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)}descargarExcel(){let i=new Array,e="";this.info.forEach(a=>{e=this.formatearFecha(new Date(a.fecha));let s={nombre:a.nombre,direccion:a.direccion,correo:a.correo,contacto:a.contacto,rtn:a.rtn,fecha:e.fecha};i.push(s)});let n=z.json_to_sheet(i);n.A1.v="Nombre",n.B1.v="Direccion",n.C1.v="Correo",n.D1.v="Contacto",n.E1.v="RTN",n.F1.v="Fecha";let r=z.book_new();z.book_append_sheet(r,n,"Informe Clientes"),Qe(r,this.fileName)}formatearFecha(i){let e=this.addZero(i.getHours()),n=this.addZero(i.getMinutes()),r=this.addZero(i.getSeconds()),a=i.getFullYear(),s=this.addZero(i.getMonth()+1),y=this.addZero(i.getDate());return{completo:a+"-"+s+"-"+y+" "+e+":"+n+":"+r,fecha:a+"-"+s+"-"+y,hora:e+":"+n+":"+r}}addZero(i){return i<10&&(i="0"+i),i}showDialog(){this.visible=!0}closeDialog(){this.visible=!1}load(i){i?(this.loading=!0,this.spinner.show()):(this.loading=!1,this.spinner.hide())}};c.\u0275fac=function(e){return new(e||c)(k(Ke),k(Se),k(A))},c.\u0275cmp=F({type:c,selectors:[["app-clientes"]],standalone:!0,features:[de],decls:37,vars:29,consts:[["dt",""],[1,"card",2,"text-align","center"],["styleClass","p-datatable-gridlines p-datatable-striped","columnResizeMode","expand","currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords} clientes","scrollHeight","300px",3,"tableStyle","value","rows","loading","columns","paginator","showCurrentPageReport","resizableColumns","rowsPerPageOptions","globalFilterFields"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["bdColor","rgba(0, 0, 0, 0.8)","size","large","color","#fff","type","ball-atom",3,"fullScreen"],["header","Header",3,"visibleChange","visible","modal","baseZIndex","breakpoints","draggable","resizable"],["ng-template","","pTemplate","header"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-6"],[1,"p-inputgroup"],["tooltipPosition","bottom","pTooltip","Nombre",1,"p-inputgroup-addon"],[1,"pi","pi-user"],["type","text","pInputText","","placeholder","Nombre",3,"ngModelChange","ngModel"],["tooltipPosition","bottom","pTooltip","Direccion",1,"p-inputgroup-addon"],[1,"pi","pi-map-marker"],["id","float-input","rows","3","cols","30","pInputTextarea","",3,"ngModelChange","ngModel"],[1,"field","col-12","md:col-4"],["tooltipPosition","bottom","pTooltip","Correo",1,"p-inputgroup-addon"],[1,"pi","pi-send"],["type","text","pInputText","","placeholder","Correo",3,"ngModelChange","ngModel"],["tooltipPosition","bottom","pTooltip","Contacto",1,"p-inputgroup-addon"],[1,"pi","pi-phone"],["type","text","pInputText","","placeholder","Contacto",3,"ngModelChange","ngModel"],["tooltipPosition","bottom","pTooltip","RTN",1,"p-inputgroup-addon"],[1,"pi","pi-id-card"],["type","text","pInputText","","placeholder","RTN",3,"ngModelChange","ngModel"],["pTemplate","footer"],[1,"mr-3",2,"display","flex"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["type","text","pInputText","","size","20","placeholder","B\xFAsqueda...",2,"width","auto!important",3,"input"],["pTooltip","Agregar Cliente","tooltipPosition","bottom","label","Agregar","icon","pi pi-external-link",1,"p-button-info","margen",3,"onClick","raised","loading","disabled"],["icon","pi pi-file","class","margen","pTooltip","Descargar CSV","tooltipPosition","bottom","severity","secondary",3,"disabled","onClick",4,"ngIf"],["icon","pi pi-file-excel","class","margen","pTooltip","Descargar Excel","tooltipPosition","bottom","severity","success",3,"disabled","onClick",4,"ngIf"],["icon","pi pi-file","pTooltip","Descargar CSV","tooltipPosition","bottom","severity","secondary",1,"margen",3,"onClick","disabled"],["icon","pi pi-file-excel","pTooltip","Descargar Excel","tooltipPosition","bottom","severity","success",1,"margen",3,"onClick","disabled"],["pResizableColumn","","style","width: 11em","class","text-center",3,"pSortableColumn",4,"ngFor","ngForOf"],["pResizableColumn","",1,"text-center",2,"width","11em",3,"pSortableColumn"],[3,"field"],[1,"animate__animated","animate__fadeInLeft"],[1,"text-center"],["pTooltip","Editar Cliente","tooltipPosition","bottom","icon","pi pi-pencil","severity","success",1,"margen2",3,"onClick","rounded"],["pTooltip","Eliminar Cliente","tooltipPosition","bottom","icon","pi pi-trash","severity","danger",1,"margen2",3,"onClick","rounded"],[1,"inline-flex","align-items-center","justify-content-center","gap-2"],["icon","pi pi-check","severity","primary",3,"raised","label","onClick",4,"ngIf"],["icon","pi pi-search","severity","success",3,"raised","label","onClick",4,"ngIf"],["icon","pi pi-eraser","severity","secondary",3,"onClick","raised","label"],["icon","pi pi-times","label","Cancelar","severity","danger",3,"onClick","raised"],["icon","pi pi-check","severity","primary",3,"onClick","raised","label"],["icon","pi pi-search","severity","success",3,"onClick","raised","label"]],template:function(e,n){if(e&1){let r=_();l(0,"div",1)(1,"p-table",2,0),b(3,wt,7,5,"ng-template",3)(4,yt,2,1,"ng-template",4)(5,kt,17,11,"ng-template",5)(6,xt,4,1,"ng-template",6),p()(),T(7,"ngx-spinner",7),l(8,"p-dialog",8),S("visibleChange",function(s){return d(r),E(n.visible,s)||(n.visible=s),h(s)}),b(9,Tt,3,1,"ng-template",9),l(10,"div",10)(11,"div",11)(12,"div",12)(13,"span",13),T(14,"i",14),p(),l(15,"input",15),S("ngModelChange",function(s){return d(r),E(n.nombreClient,s)||(n.nombreClient=s),h(s)}),p()()(),l(16,"div",11)(17,"div",12)(18,"span",16),T(19,"i",17),p(),l(20,"textarea",18),S("ngModelChange",function(s){return d(r),E(n.direccionClient,s)||(n.direccionClient=s),h(s)}),p()()(),l(21,"div",19)(22,"div",12)(23,"span",20),T(24,"i",21),p(),l(25,"input",22),S("ngModelChange",function(s){return d(r),E(n.correoClient,s)||(n.correoClient=s),h(s)}),p()()(),l(26,"div",19)(27,"div",12)(28,"span",23),T(29,"i",24),p(),l(30,"input",25),S("ngModelChange",function(s){return d(r),E(n.contactoClient,s)||(n.contactoClient=s),h(s)}),p()()(),l(31,"div",19)(32,"div",12)(33,"span",26),T(34,"i",27),p(),l(35,"input",28),S("ngModelChange",function(s){return d(r),E(n.rtnClient,s)||(n.rtnClient=s),h(s)}),p()()()(),b(36,Mt,4,5,"ng-template",29),p()}e&2&&(u(),m("tableStyle",N(24,ht))("value",n.info)("rows",n.filas)("loading",n.loading)("columns",n.columnas)("paginator",!0)("showCurrentPageReport",!0)("resizableColumns",!0)("rowsPerPageOptions",N(25,mt))("globalFilterFields",N(26,ft)),u(6),m("fullScreen",!0),u(),ne(N(27,Ct)),M("visible",n.visible),m("modal",!0)("baseZIndex",1e4)("breakpoints",N(28,gt))("draggable",!1)("resizable",!1),u(7),M("ngModel",n.nombreClient),u(5),M("ngModel",n.direccionClient),u(5),M("ngModel",n.correoClient),u(5),M("ngModel",n.contactoClient),u(5),M("ngModel",n.rtnClient))},dependencies:[Ne,L,R,_e,D,ve,Ie,ke,xe,Te,Ue,je,qe,We,ze,De,Fe,q,j,Ae,Re,Oe,Le,Ze,Xe,He,Pe,Be],styles:[".swal2-container{z-index:20000!important}.margen[_ngcontent-%COMP%]{margin-left:5px}.margen2[_ngcontent-%COMP%]{margin-right:.5rem}"]});let o=c;return o})();export{mi as ClientesComponent};
